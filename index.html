<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>FlowTradeAI</title>
  <style>
    body {
      background:#0b1220;
      color:white;
      font-family:Arial;
      margin:0;
      padding:20px;
    }
    .card {
      background:#111827;
      padding:20px;
      border-radius:10px;
      margin-bottom:20px;
    }
    button {
      padding:12px;
      background:#22c55e;
      border:none;
      border-radius:8px;
      font-weight:bold;
      cursor:pointer;
    }
    table {
      width:100%;
      border-collapse:collapse;
    }
    td, th {
      padding:8px;
      border-bottom:1px solid #1f2937;
    }
  </style>
</head>

<body>

<h2>FlowTradeAI Dashboard</h2>

<div class="card">
  <b>Balance:</b> $<span id="balance">---</span><br><br>
  <b>BTC Price:</b> $<span id="price">---</span><br>
  <b>Signal:</b> <span id="signal">---</span><br>
  <b>Confidence:</b> <span id="confidence">---</span>%<br>
  <b>RSI:</b> <span id="rsi">---</span><br>
  <b>MACD:</b> <span id="macd">---</span><br><br>
  <button onclick="runAI()">Run AI Auto-Trade</button>
  <p id="msg"></p>
</div>

<div class="card">
  <h3>Trade History</h3>
  <table>
    <thead>
      <tr><th>Time</th><th>Action</th><th>Price</th></tr>
    </thead>
    <tbody id="history"></tbody>
  </table>
</div>

<script>
  const BACKEND = "http://localhost:3000";

  async function runAI() {
    const res = await fetch(BACKEND + "/ai", { method:"POST" });
    const data = await res.json();

    balance.innerText = data.balance;
    price.innerText = data.price.toFixed(2);
    signal.innerText = data.signal;
    confidence.innerText = data.confidence;
    rsi.innerText = data.rsi;
    macd.innerText = data.macd;
    msg.innerText = data.message;

    history.innerHTML = "";
    data.history.forEach(t => {
      history.innerHTML += `<tr>
        <td>${t.time}</td>
        <td>${t.action}</td>
        <td>$${t.price}</td>
      </tr>`;
    });
  }
</script>

</body>
</html>
