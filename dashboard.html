<!DOCTYPE html>
<html>
<head>
  <title>Dashboard ‚Äì FlowTradeAI</title>
</head>

<body style="font-family:Arial;background:#020617;color:white;text-align:center;padding-top:60px;">

<h1>FlowTradeAI Dashboard</h1>

<p id="status">Checking login...</p>

<br>

<button onclick="startBot()">Start Auto Trading</button>
<br><br>
<button onclick="stopBot()">Stop Auto Trading</button>
<br><br>
<button onclick="logout()">Logout</button>

<p id="msg"></p>

<script>
const API = "https://flowtradeai-backend-v3.onrender.com";
const token = localStorage.getItem("token");

// üîê Check login
if (!token) {
  window.location.href = "login.html";
} else {
  document.getElementById("status").innerText = "Logged in ‚úî";
}

// ‚ñ∂ Start trading
async function startBot() {
  try {
    const res = await fetch(API + "/start-bot", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + token
      }
    });

    const data = await res.json();
    document.getElementById("msg").innerText =
      data.message || data.error || "Unknown response";
  } catch {
    document.getElementById("msg").innerText = "Backend error";
  }
}

// ‚èπ Stop trading
async function stopBot() {
  try {
    const res = await fetch(API + "/stop-bot", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + token
      }
    });

    const data = await res.json();
    document.getElementById("msg").innerText =
      data.message || data.error || "Unknown response";
  } catch {
    document.getElementById("msg").innerText = "Backend error";
  }
}

// üö™ Logout
function logout() {
  localStorage.removeItem("token");
  window.location.href = "login.html";
}
</script>

</body>
</html>
